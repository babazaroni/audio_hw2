

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!--XDE partnum="XM-001898-SM" version="2.4.1rc1"-->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>XMOS I2C Master Component &mdash; XMOS I2C Master Component v documentation</title>

    <link rel="stylesheet" href=".static/pygments.css" type="text/css" />
    <link rel="stylesheet" href=".static/globals.css"  type="text/css" />
    <link rel="stylesheet" href=".static/ui.css" type="text/css" />
    <link rel="stylesheet" href=".static/app.css"  type="text/css" />
    <link rel="stylesheet" href=".static/mobile.css"  type="text/css" />
    <link rel="stylesheet" href=".static/xde.css"
    type="text/css" /><script type="text/javascript" src=".static/scripts.js"></script>
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src=".static/jquery.js"></script>
    <script type="text/javascript" src=".static/underscore.js"></script>
    <script type="text/javascript" src=".static/doctools.js"></script>
    <link rel="top" title="XMOS I2C Master Component v documentation" href="#" />
    <link rel="next" title="sc_i2c Change Log" href="changelog.html" /> 
  </head>
  <body class="xde indented-content" onload="prepareContents();">  
          <div id="body">
             <div id="content">
             <h1>XMOS I2C Master Component</h1>

             <div class='columns'>
            
  <ul class="field_list"><li><h2>Version</h2>
<p><p>2.4.1rc1</p>
</p>
</li>
<li><h2>Vendor</h2>
<p><p>XMOS</p>
</p>
</li>
<li><h2>Description</h2>
<p><p>I2C Software Component</p>
</p>
</li>
</ul>
<p>The I2C Component provides the ability to write and read the I2C Compatible Slave devices.</p>
<h2 class="topic" id="software-blocks">Software Blocks</h2>
<div><dl class="docutils">
<dt>app_i2c_master_uac2slave_test (app_i2c_simple_uac2slave_demo)</dt>
<dd><p>I2C Master test app for USB Audio with I2C slave</p>
</dd>
<dt>I2C Master (Single Bit Ports) Function Library (module_i2c_master)</dt>
<dd><p>Function Library implementing basic multi master I2C read and write functionality, designed for use with 1 bit ports</p>
</dd>
<dt>module_i2c_shared Readme (module_i2c_shared)</dt>
<dd><p>Allows accessing of i2c bus safely from multiple logical cores</p>
</dd>
<dt>I2C Master (Using A Single Multi Bit Port) Function Library (module_i2c_single_port)</dt>
<dd><p>Function Library implementing basic multi master I2C read and write functionality, designed for use with  a multi bit port</p>
</dd>
</dl>
</div><h2 class="topic" id="documentation">Documentation</h2>
<div><blockquote>
<div><ul>
<li><a class="reference" href="././module_i2c_master/doc/index.html"><span>I2C Master (Using 1-bit Ports) Component</span></a> <a class="reference" href="././module_i2c_master/doc.pdf"><span>PDF</span></a></li>
<li><a class="reference" href="././module_i2c_single_port/doc/index.html"><span>I2C Master (Using Single Multibit Port) Component</span></a> <a class="reference" href="././module_i2c_single_port/doc.pdf"><span>PDF</span></a></li>
<li><a class="reference" href="././changelog.html"><span>Release Notes</span></a></li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="key-features">Key Features</h2>
<div><p>module_i2c:</p>
<ul>
<li>Works at 100 Kbps and 400 Kbps</li>
<li>Supports Clock stretching</li>
<li>Supports Multi master capability.</li>
<li>Supports Clock synchronization.</li>
</ul>
<p>module_i2c_simple / module_i2c_single_port:</p>
<ul>
<li>Small footprint</li>
<li>Works at 100 Kbps and 400 Kbps</li>
<li>Single system-wide I2C bus with XCore acting as the single master.</li>
<li>SDA and SCL can be on a single wide port (module_i2c_single_port)</li>
</ul>
<p>module_i2c_master:</p>
<ul>
<li>Works at 100 Kbps and 400 Kbps</li>
<li>Multiple I2C busses</li>
<li>Supports Clock stretching</li>
<li>Support for Multi master capability.</li>
<li>Support for Clock synchronization.</li>
</ul>
</div><h2 class="topic" id="firmware-overview">Firmware Overview</h2>
<div><p>The Component is in the form of a function library and can be called in a thread.</p>
<p>Module_i2c is meant to be deprecated, once module_i2c_master is completed,
and once the slave part has been moved to module_i2c_slave.</p>
</div><h2 class="topic" id="known-issues">Known Issues</h2>
<div><p>does not support 10 bit addressing
does not support CBUS capability.
does not support HS-Mode.</p>
</div><h2 class="topic" id="instructions-for-building-project-and-running-the-simulation">Instructions for Building Project and running the simulation.</h2>
<div><p>The Software Components for I2C are built using XMOS Development Environment (XDE) Version: 10.4.2 (build 1752) or later.
The module can be simulated using test bench.
Following steps is to followed to run the simulation</p>
<blockquote>
<div><ol class="arabic simple">
<li>import the xcommon and xmos_i2c folders into XMOS Development Environment.</li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li>open run configuration.</li>
</ol>
</div></blockquote>
<ol class="arabic simple">
<li>In Main tab select simulator in Device options.</li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li>Select simulator Tab.</li>
<li>Tick enable tracing.</li>
<li>Tick Pads.</li>
<li>In Local Tracing options click on ADD button and select stdcore[1] and ports.</li>
<li>Select Pins tab.</li>
<li>Enable Pin connections</li>
<li>Click on Add Button.</li>
</ol>
</div></blockquote>
<ol class="arabic simple">
<li>Select stdcore[1].</li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li>Connect Port XS1_PORT_1B to XS1_PORT_1F.</li>
<li>Connect Port XS1_PORT_1A to XS1_PORT_1E.</li>
<li>Connect Port XS1_PORT_1B to XS1_PORT_1D.</li>
<li>Connect Port XS1_PORT_1A to XS1_PORT_1C.</li>
<li>Connect Port XS1_PORT_1B to XS1_PORT_1G</li>
<li>Connect Port XS1_PORT_1A to XS1_PORT_1H.</li>
<li>Connect Port XS1_PORT_1F to XS1_PORT_1D</li>
<li>Connect Port XS1_PORT_1E to XS1_PORT_1C.</li>
<li>Connect Port XS1_PORT_1F to XS1_PORT_1G.</li>
<li>Connect Port XS1_PORT_1E to XS1_PORT_1H.</li>
<li>Connect Port XS1_PORT_1D to XS1_PORT_1G.</li>
<li>Connect Port XS1_PORT_1C to XS1_PORT_1H.</li>
</ol>
</div></blockquote>
<ol class="arabic simple">
<li>Apply the changes and run.</li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li>In i2c_test_def.h keep MASTER_TX uncommenting for master transmit and slave receive.</li>
<li>For Comment MASTER_TX for slave transmit and master receive.</li>
<li>For single master and single slave comment MASTER2 and SLAVE2 or comment MASTER1 and SLAVE1.</li>
<li>for single slave and two masters select MASTER1 and MASTER2 comment SLAVE1 or SLAVE2.</li>
<li>for two slaves and single master select SLAVE1 and SLAVE2 comment MASTER1 or MASTER2.</li>
<li>for two master and two slaves select both  MASTER1 and MASTER2, and SLAVE1 and SLAVE2.</li>
<li>run the simulation. Check for valid data on the console window.</li>
</ol>
</div></blockquote>
</div></blockquote>
</div><h2 class="topic" id="required-software-dependencies">Required software (dependencies)</h2>
<div><blockquote>
<div><ul>
<li>sc_util</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="support">Support</h2>
<div><blockquote>
<div><p>This package is support by XMOS Ltd. Issues can be raised against the software
at:</p>
<blockquote>
<div><p><a class="reference" href="http://www.xmos.com/support"><span>http://www.xmos.com/support</span></a></p>
</div></blockquote>
</div></blockquote>
</div>

             </div>
             </div>


          </div>

          <div>
             <!--seealsos-->
          </div>
    <div class="footer">
    </div>
  </body>
</html>